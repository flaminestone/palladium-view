<div class="result-set-space very-big-column">
  <app-filters [statuses] = statuses [statistic] = statistic [all_data]="" (selected_statuses_emmit)="get_filters($event)"></app-filters>
  <div class="add-result-block disabled" (click)="add_result_modal(result_setadd_resultModal)">
    <span>Add result </span><span class="badge">{{this.selected_objects.length}}</span>
  </div>
  <div class="result_sets_list">
    <div class="result-set-block" routerLinkActive="active" *ngFor="let object of result_sets_and_cases | statusFilter:filter | sortByCreatedAt:'asc'; let index = index"  [ngStyle]="getStyles(object)"  (mouseenter)="show_settings_button(index)" (mouseleave)="hide_settings_button(index)">
      <div class="result-set-name-and-status">
        <table>
          <tr>
            <td class="checkbox_column">
              <input type="checkbox" name="result_option" (change)="selectCounter($event, object)" [value]="object.id">
            </td>
            <td class="name_column">
              <a id="result_set-name-{{index}}" (click)="open_results(object)" *ngIf="object.path === 'result_set'" [routerLink]="['./result_set', object.id]">{{object.name}}</a>
              <span *ngIf="object.path === 'case'" >{{object.name}}</span>
            </td>
            <td>
              <div class="status result-set-status status-name" *ngIf="this.statuses">
                {{this.statuses[object.status].name}}
                <div class="status-color-block" [ngStyle]="getStylesBackround(object)"></div>
              </div>
            </td>
          </tr>
        </table>
        <div id="{{index}}" class="setting result-set-setting-button" (click)="settings(result_setsettingsModal, object, index, settingsform);"></div>
      </div>
    </div>
  </div>
</div>
<modal #result_setsettingsModal>
  <modal-header>
    <h1>result_set settings</h1>
  </modal-header>
  <modal-content>
    Change result_set name
    <form autocomplete="off" #settingsform="ngForm"  (ngSubmit)="edit_result_set(settingsform, result_setsettingsModal, settingsform.valid )">
      <input type="text" class="result-set-name" name="result_set_name" ngModel required #result_set_name="ngModel" autofocus>
      <small [hidden]="result_set_name.valid || (result_set_name.pristine && !settingsform.submitted)">
        result_set name can't be empty.
      </small>
    </form>
  </modal-content>
  <modal-footer>
    <button class="btn btn-danger result-set-delete-button" (click)="delete_result_set(result_setsettingsModal)">Delete</button>
    <button class="btn btn-success" [disabled]="!settingsform.valid" (click)="settingsform.ngSubmit.emit(settingsform)">Save</button>
  </modal-footer>
</modal>
<modal #result_setadd_resultModal>
  <modal-header>
    <h1>Add Result</h1>
  </modal-header>
  <modal-content>
    Add result for <b>{{this.selected_objects}}</b> result_sets
    <form autocomplete="off" #addresultform="ngForm"  (ngSubmit)="add_results(addresultform, result_setadd_resultModal, addresultform.valid )">
      <app-status-selector #Selector [all_statuses] = "this.not_blocked_status" (selected_status)="selected_status_get($event)" *ngIf="this.all_statuses"></app-status-selector>
      <small [hidden]="(this.selected_status_id !== null) && !addresultform.submitted">
        Need to change status
      </small>
      <input placeholder="Result description" class="result-description" name="result_description" ngModel required #result_description="ngModel" autofocus>
    </form>
  </modal-content>
  <modal-footer>
    <button class="btn btn-success" (click)="addresultform.ngSubmit.emit(addresultform)">Add result</button>
  </modal-footer>
</modal>
<router-outlet></router-outlet>
