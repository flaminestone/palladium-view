<div class="run-space">
  <div class="toolbar">
    <div class="filter" [ngClass]="{'hidden': loading}">
      <div *ngFor="let status of statuses" class="status-block" (click)="select_filter(status)"
           [ngStyle]="{'border-bottom': '7px solid ' + status.color}"
           [ngClass]="{'hidden': hide_element(this.statistic, status), 'activated': status.active}">

        <div class="status">
          <div class="status-count">{{this.statistic.extended[status.id] || 0}}</div>
          <div class="status-name">{{status.name}}</div>
        </div>
      </div>
    </div>
    <div class="buttons">
      <div class="toolbar-element" (click)="update_click()" [ngClass]="{'disabled': this.loading}">
        <i class="fa fa-refresh" aria-hidden="true" [ngClass]="{'fa-spin': this.loading}"></i>
      </div>
      <div class="toolbar-element" (click)="open_modal()" *ngIf="toolbar_opened()" [ngClass]="{'disabled': this.loading}">
        <i class="fa fa-cogs" aria-hidden="true"></i>
      </div>
    </div>
  </div>

  <div class="item-list" (scroll)="colScroll($event)">
    <div [style.height.px]="Math.max(0, Math.max(0, scrollPos - 10) * 53.5 )"></div>
    <div class="item-wrapper hoverer" *ngFor="let object of runs_and_suites| statisticFilter:filter| virtualscroll:scrollPos:20; let index = index">
      <app-run [filter]=filter [object]=object [index]=index [statuses]=statuses *ngIf="object.path === './run'"></app-run>
      <app-suite (replace_to_run)="replace_to_run($event)" [object]=object [index]=index [statuses]=statuses *ngIf="object.path === './suite'"></app-suite>
    </div>
    <div [style.height.px]="Math.max(0, (runs_and_suites.length - scrollPos - 30)  * 53.5)"></div>
  </div>
</div>


<modal #Modal>
  <modal-header>
    <h1>Change object name</h1>
  </modal-header>
  <modal-content>
    <div class="settings_content">
      <div class="item-description">
        <form autocomplete="off" #form="ngForm" (ngSubmit)="edit_object_modal(form, Modal)">
          <div class="item-option">
            <input (keyup)="clear_errors()" type="text" class="run-name" name="name" ngModel required #name="ngModel" autofocus>
            <small [hidden]="name.valid || (name.pristine && !form.submitted)">
              Object name can't be empty.
            </small>
            <small [hidden]="!name.valid" *ngFor="let error of errors['name']">
              {{error}}
            </small>
          </div>
          <div class="item-option">
            <label *ngIf="object"> Created at: {{object.created_at}}</label>
          </div>
          <div class="item-option">
            <label *ngIf="object"> Updated at: {{object.updated_at}}</label>
          </div>
          <button class="btn btn-success save_button" [disabled]="!form.valid" (click)="form.ngSubmit.emit(form)">
            Save
          </button>
        </form>
        <button class="btn btn-danger" (click)="delete_object()">Delete</button>
      </div>
    </div>
  </modal-content>
</modal>
<router-outlet (activate)="onActivate($event)"></router-outlet>
